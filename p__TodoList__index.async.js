"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[130],{15339:function(no,S,o){o.r(S),o.d(S,{default:function(){return oo}});var E=o(42122),d=o.n(E),M=o(861),P=o.n(M),V=o(27424),j=o.n(V),N=o(55375),z=function(L){return L.TODO_LIST_ATOM="TODO_LIST_ATOM",L}({}),C=o(59731),T=o(22638),Y=o(69483),F=o.n(Y),x=o(96486),I=o(67294),R=o(4480),K=(0,R.cn)({key:z.TODO_LIST_ATOM,default:{isLoading:!1,todoList:[]}}),p=function(){var i=(0,R.FV)(K),f=j()(i,2),t=f[0],m=t.isLoading,u=t.todoList,l=f[1],a=(0,T.Z)(function(e){F().setItem(C.F.TODO_LIST_KEY,e)}),c=(0,T.Z)(function(){var e=[].concat(P()(u),[{id:"".concat(N.X).concat(new Date().getTime()),title:"",content:"",seq:"",done:!1,note:""}]);l(function(r){return d()(d()({},r),{},{todoList:e})}),a(e)}),g=(0,T.Z)(function(e){var r=(0,x.filter)(u,function(s){return(s==null?void 0:s.id)!==e});l(function(s){return d()(d()({},s),{},{todoList:r})}),a(r)}),O=(0,T.Z)(function(e){var r=e.id,s=(0,x.map)(u,function(v){return(v==null?void 0:v.id)===r?d()(d()({},v),e):v});l(function(v){return d()(d()({},v),{},{todoList:s})}),a(s)});return(0,I.useEffect)(function(){l(function(e){return d()(d()({},e),{},{isLoading:!0})}),F().getItem(C.F.TODO_LIST_KEY).then(function(e){l(function(r){return d()(d()({},r),{},{todoList:e||[]})})}).finally(function(){l(function(e){return d()(d()({},e),{},{isLoading:!1})})})},[]),{isLoading:m,todoList:u,handleAddTodoItem:c,handleRemoveTodoItem:g,handleUpdateTodoItem:O}},G=o(55914),W=o(77554),Z=o(46930),X=o(71230),U=o(15746),$=o(29789),A=o(68916),D=o(67759),B=o(88942),h={"todo-item-wrapper":"todo-item-wrapper___tVFjc","check-box":"check-box___YMuVz",title:"title___yALYU",content:"content___MGx0F"},n=o(85893),H=Z.Z.Title,J=Z.Z.Paragraph,Q=function(i){var f=i.index,t=i.todoListItem,m=i.onUpdateItem,u=(0,I.useState)(!1),l=j()(u,2),a=l[0],c=l[1],g=(0,I.useRef)(null),O=(0,B.Z)(),e=j()(O,1),r=e[0],s=function(){setTimeout(function(){return c(!0)})},v=(0,T.Z)(function(){a&&c(!1)}),to=(0,x.debounce)(function(y,eo){m(d()({id:t==null?void 0:t.id},y))},200);return(0,G.Z)(v,g),(0,W.Z)(["enter","esc"],function(){a&&c(!1)}),a?(0,n.jsx)("div",{className:h["todo-item-wrapper"],ref:g,children:(0,n.jsxs)(A.Z,{form:r,initialValues:{title:(t==null?void 0:t.title)||"",content:(t==null?void 0:t.content)||""},onValuesChange:to,children:[(0,n.jsx)(A.Z.Item,{name:"title",label:"\u6807\u9898",children:(0,n.jsx)(D.Z,{})}),(0,n.jsx)(A.Z.Item,{name:"content",label:"\u5185\u5BB9",children:(0,n.jsx)(D.Z,{})})]})}):(0,n.jsx)(Z.Z,{className:h["todo-item-wrapper"],children:(0,n.jsxs)(X.Z,{align:"middle",children:[(0,n.jsx)(U.Z,{style:{flex:"none"},children:(0,n.jsx)("div",{className:h["check-box"],children:(0,n.jsx)($.Z,{checked:t==null?void 0:t.done,onChange:function(){return m({id:t==null?void 0:t.id,done:!(t!=null&&t.done)})}})})}),(0,n.jsxs)(U.Z,{style:{flex:"1"},children:[(0,n.jsx)(H,{className:h.title,level:2,onClick:s,children:"TODO ".concat(f,": ").concat((t==null?void 0:t.title)||"")}),(0,n.jsx)(J,{className:h.content,onClick:s,children:(t==null?void 0:t.content)||"\u586B\u5199 Todo \u5185\u5BB9..."})]})]})})},b=Q,k=o(24969),w=o(33904),q=o(18610),_=function(){var i=p(),f=i.isLoading,t=i.todoList,m=i.handleAddTodoItem,u=i.handleRemoveTodoItem,l=i.handleUpdateTodoItem;return(0,n.jsx)(w._z,{header:{title:"Todo list",subTitle:"\u522B\u8BA9\u672A\u6765\u7684\u98CE\u9669\u5F71\u54CD\u73B0\u5728\u7684\u4F60"},loading:f,extra:[(0,n.jsxs)(q.ZP,{type:"primary",size:"large",onClick:m,children:[(0,n.jsx)(k.Z,{}),"Add Todo"]},"add-todo")],children:(0,x.map)(t,function(a,c){return(0,n.jsx)(b,{index:c+1,todoListItem:a,onUpdateItem:l},a==null?void 0:a.id)})})},oo=_}}]);
