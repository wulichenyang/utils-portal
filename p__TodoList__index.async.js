"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[130],{44918:function(To,V,t){t.r(V),t.d(V,{default:function(){return co}});var J=t(27424),C=t.n(J),$=t(42122),l=t.n($),K=t(861),W=t.n(K),X=t(55375),I=function(s){return s.TODO_LIST_ATOM="TODO_LIST_ATOM",s.NOT_DONE_TODO_LIST_ATOM_SELECTOR="NOT_DONE_TODO_LIST_ATOM_SELECTOR",s.DONE_TODO_LIST_ATOM_SELECTOR="DONE_TODO_LIST_ATOM_SELECTOR",s}({}),Y=t(59731),m=t(22638),H=t(69483),z=t.n(H),h=t(96486),E=t(67294),x=t(4480),R=(0,x.cn)({key:I.TODO_LIST_ATOM,default:{isLoading:!1,todoList:[]}}),Q=(0,x.nZ)({key:I.DONE_TODO_LIST_ATOM_SELECTOR,get:function(i){var T=i.get,o=T(R),v=o.todoList;return(0,h.filter)(v,function(d){return d==null?void 0:d.done})}}),p=(0,x.nZ)({key:I.NOT_DONE_TODO_LIST_ATOM_SELECTOR,get:function(i){var T=i.get,o=T(R),v=o.todoList;return(0,h.filter)(v,function(d){return!(d!=null&&d.done)})}}),k=function(){var i=(0,x.FV)(R),T=C()(i,2),o=T[0],v=o.isLoading,d=o.todoList,f=T[1],S=(0,x.sJ)(Q),g=(0,x.sJ)(p),O=(0,m.Z)(function(a){z().setItem(Y.F.TODO_LIST_KEY,a)}),D=(0,m.Z)(function(){var a=[].concat(W()(d),[{id:"".concat(X.X).concat(new Date().getTime()),title:"",content:"",seq:"",done:!1,note:""}]);f(function(u){return l()(l()({},u),{},{todoList:a})}),O(a)}),A=(0,m.Z)(function(a){var u=(0,h.filter)(d,function(c){return(c==null?void 0:c.id)!==a});f(function(c){return l()(l()({},c),{},{todoList:u})}),O(u)}),j=(0,m.Z)(function(a){var u=a.id,c=(0,h.map)(d,function(n){return(n==null?void 0:n.id)===u?l()(l()({},n),a):n});f(function(n){return l()(l()({},n),{},{todoList:c})}),O(c)});return(0,E.useEffect)(function(){f(function(a){return l()(l()({},a),{},{isLoading:!0})}),z().getItem(Y.F.TODO_LIST_KEY).then(function(a){f(function(u){return l()(l()({},u),{},{todoList:a||[]})})}).finally(function(){f(function(a){return l()(l()({},a),{},{isLoading:!1})})})},[]),{isLoading:v,todoList:d,doneTodoList:S,notDoneTodoList:g,handleAddTodoItem:D,handleRemoveTodoItem:A,handleUpdateTodoItem:j}},b=t(48689),w=t(55914),q=t(77554),y=t(46930),_=t(71230),M=t(15746),oo=t(56616),F=t(68916),G=t(67759),to=t(88942),N={"todo-item-wrapper":"todo-item-wrapper___tVFjc","check-box":"check-box___YMuVz",title:"title___yALYU",content:"content___MGx0F","delete-icon":"delete-icon___ZYcin"},e=t(85893),no=y.Z.Title,eo=y.Z.Paragraph,ao=function(i){var T=i.index,o=i.todoListItem,v=i.onUpdateItem,d=i.onRemoveItem,f=(0,E.useState)(!1),S=C()(f,2),g=S[0],O=S[1],D=(0,E.useRef)(null),A=(0,to.Z)(),j=C()(A,1),a=j[0],u=function(){setTimeout(function(){return O(!0)})},c=(0,m.Z)(function(){g&&O(!1)}),n=(0,h.debounce)(function(L,fo){v(l()({id:o==null?void 0:o.id},L))},200);return(0,w.Z)(c,D),(0,q.Z)(["enter","esc"],function(){g&&O(!1)}),g?(0,e.jsx)("div",{className:N["todo-item-wrapper"],ref:D,children:(0,e.jsxs)(F.Z,{form:a,initialValues:{title:(o==null?void 0:o.title)||"",content:(o==null?void 0:o.content)||""},onValuesChange:n,children:[(0,e.jsx)(F.Z.Item,{name:"title",label:"\u6807\u9898",children:(0,e.jsx)(G.Z,{})}),(0,e.jsx)(F.Z.Item,{name:"content",label:"\u5185\u5BB9",children:(0,e.jsx)(G.Z,{})})]})}):(0,e.jsx)(y.Z,{className:N["todo-item-wrapper"],children:(0,e.jsxs)(_.Z,{align:"middle",children:[(0,e.jsx)(M.Z,{style:{flex:"none"},children:(0,e.jsx)("div",{className:N["check-box"],children:(0,e.jsx)(oo.Z,{checked:o==null?void 0:o.done,onChange:function(){return v({id:o==null?void 0:o.id,done:!(o!=null&&o.done)})}})})}),(0,e.jsxs)(M.Z,{style:{flex:"1"},children:[(0,e.jsx)(no,{className:N.title,level:2,onClick:u,children:"TODO ".concat(T,": ").concat((o==null?void 0:o.title)||"")}),(0,e.jsx)(eo,{className:N.content,onClick:u,children:(o==null?void 0:o.content)||"\u586B\u5199 Todo \u5185\u5BB9..."})]}),(0,e.jsx)(M.Z,{style:{flex:"none"},children:(0,e.jsx)(b.Z,{className:N["delete-icon"],onClick:function(){return d(o==null?void 0:o.id)}})})]})})},io=ao,lo=t(38416),P=t.n(lo),Z,r=function(s){return s.ALL="ALL",s.DONE="DONE",s.NOT_DONE="NOT_DONE",s}({}),U=(Z={},P()(Z,r.ALL,"\u6240\u6709"),P()(Z,r.DONE,"\u5DF2\u5B8C\u6210"),P()(Z,r.NOT_DONE,"\u5F85\u529E"),Z),so=t(24969),ro=t(33904),vo=t(18610),B=t(78045),uo=function(){var i=k(),T=i.isLoading,o=i.todoList,v=i.doneTodoList,d=i.notDoneTodoList,f=i.handleAddTodoItem,S=i.handleRemoveTodoItem,g=i.handleUpdateTodoItem,O=(0,E.useState)(r.NOT_DONE),D=C()(O,2),A=D[0],j=D[1],a=function(){switch(A){case r.ALL:return o;case r.DONE:return v;case r.NOT_DONE:return d;default:return[]}}(),u=[{todoType:r.ALL,count:(o==null?void 0:o.length)||0,status:U[r.ALL]},{todoType:r.NOT_DONE,count:(d==null?void 0:d.length)||0,status:U[r.NOT_DONE]},{todoType:r.DONE,count:(v==null?void 0:v.length)||0,status:U[r.DONE]}],c=(0,m.Z)(function(n){var L;j(n==null||(L=n.target)===null||L===void 0?void 0:L.value)});return(0,e.jsxs)(ro._z,{header:{title:"Todo list",subTitle:"\u522B\u8BA9\u672A\u6765\u7684\u98CE\u9669\u5F71\u54CD\u73B0\u5728\u7684\u4F60"},loading:T,extra:[(0,e.jsxs)(vo.ZP,{type:"primary",size:"large",onClick:f,children:[(0,e.jsx)(so.Z,{}),"Add Todo"]},"add-todo")],children:[(0,e.jsx)(B.ZP.Group,{onChange:c,value:A,style:{marginBottom:20},children:(0,h.map)(u,function(n){return(0,e.jsx)(B.ZP.Button,{value:n==null?void 0:n.todoType,children:"".concat(n==null?void 0:n.status," (").concat(n==null?void 0:n.count,")")},n==null?void 0:n.todoType)})}),(0,h.map)(a,function(n,L){return(0,e.jsx)(io,{index:L+1,todoListItem:n,onUpdateItem:g,onRemoveItem:S},n==null?void 0:n.id)})]})},co=uo}}]);
