"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[130],{15339:function(eo,y,o){o.r(y),o.d(y,{default:function(){return to}});var U=o(42122),e=o.n(U),P=o(861),V=o.n(P),M=o(27424),g=o.n(M),z=o(55375),K=function(h){return h.TODO_LIST_ATOM="TODO_LIST_ATOM",h}({}),S=o(59731),T=o(22638),Y=o(69483),C=o.n(Y),L=o(96486),j=o(67294),F=o(4480),N=(0,F.cn)({key:K.TODO_LIST_ATOM,default:{isLoading:!1,todoList:[]}}),W=function(){var i=(0,F.FV)(N),f=g()(i,2),t=f[0],m=t.isLoading,u=t.todoList,l=f[1],a=(0,T.Z)(function(d){C().setItem(S.F.TODO_LIST_KEY,d)}),c=(0,T.Z)(function(){var d=[].concat(V()(u),[{id:"".concat(z.X).concat(new Date().getTime()),title:"",content:"",seq:"",done:!1,note:""}]);l(function(r){return e()(e()({},r),{},{todoList:d})}),a(d)}),x=(0,T.Z)(function(d){var r=(0,L.filter)(u,function(s){return(s==null?void 0:s.id)!==d});l(function(s){return e()(e()({},s),{},{todoList:r})}),a(r)}),A=(0,T.Z)(function(d){var r=d.id,s=(0,L.map)(u,function(v){return(v==null?void 0:v.id)===r?e()(e()({},v),d):v});l(function(v){return e()(e()({},v),{},{todoList:s})}),a(s)});return(0,j.useEffect)(function(){l(function(d){return e()(e()({},d),{},{isLoading:!0})}),C().getItem(S.F.TODO_LIST_KEY).then(function(d){l(function(r){return e()(e()({},r),{},{todoList:d||[]})})}).finally(function(){l(function(d){return e()(e()({},d),{},{isLoading:!1})})})},[]),{isLoading:m,todoList:u,handleAddTodoItem:c,handleRemoveTodoItem:x,handleUpdateTodoItem:A}},X=o(55914),$=o(77554),Z=o(46930),B=o(71230),R=o(15746),G=o(29789),H=o(96074),I=o(68916),D=o(67759),J=o(88942),E={"todo-item-wrapper":"todo-item-wrapper___tVFjc","check-box":"check-box___YMuVz"},n=o(85893),Q=Z.Z.Title,p=Z.Z.Paragraph,b=function(i){var f=i.index,t=i.todoListItem,m=i.onUpdateItem,u=(0,j.useState)(!1),l=g()(u,2),a=l[0],c=l[1],x=(0,j.useRef)(null),A=(0,J.Z)(),d=g()(A,1),r=d[0],s=function(){setTimeout(function(){return c(!0)})},v=(0,T.Z)(function(){a&&c(!1)}),no=(0,L.debounce)(function(O,ao){m(e()({id:t==null?void 0:t.id},O))},200);return(0,X.Z)(v,x),(0,$.Z)(["enter","esc"],function(){a&&c(!1)}),a?(0,n.jsx)("div",{ref:x,children:(0,n.jsxs)(I.Z,{form:r,initialValues:{title:(t==null?void 0:t.title)||"",content:(t==null?void 0:t.content)||""},onValuesChange:no,children:[(0,n.jsx)(I.Z.Item,{name:"title",label:"\u6807\u9898",children:(0,n.jsx)(D.Z,{})}),(0,n.jsx)(I.Z.Item,{name:"content",label:"\u5185\u5BB9",children:(0,n.jsx)(D.Z,{})})]})}):(0,n.jsxs)(Z.Z,{className:E["todo-item-wrapper"],children:[(0,n.jsxs)(B.Z,{align:"middle",children:[(0,n.jsx)(R.Z,{style:{flex:"none"},children:(0,n.jsx)("div",{className:E["check-box"],children:(0,n.jsx)(G.Z,{checked:t==null?void 0:t.done,onChange:function(){return m({id:t==null?void 0:t.id,done:!(t!=null&&t.done)})}})})}),(0,n.jsxs)(R.Z,{style:{flex:"1"},children:[(0,n.jsx)(Q,{level:2,onClick:s,children:"TODO ".concat(f,": ").concat((t==null?void 0:t.title)||"")}),(0,n.jsx)(p,{onClick:s,children:(t==null?void 0:t.content)||"\u586B\u5199 Todo \u5185\u5BB9..."})]})]}),(0,n.jsx)(H.Z,{})]})},k=b,w=o(24969),q=o(33904),_=o(18610),oo=function(){var i=W(),f=i.isLoading,t=i.todoList,m=i.handleAddTodoItem,u=i.handleRemoveTodoItem,l=i.handleUpdateTodoItem;return(0,n.jsx)(q._z,{header:{title:"Todo list",subTitle:"\u522B\u8BA9\u672A\u6765\u7684\u98CE\u9669\u5F71\u54CD\u73B0\u5728\u7684\u4F60"},loading:f,extra:[(0,n.jsxs)(_.ZP,{type:"primary",size:"large",onClick:m,children:[(0,n.jsx)(w.Z,{}),"Add Todo"]},"add-todo")],children:(0,L.map)(t,function(a,c){return(0,n.jsx)(k,{index:c+1,todoListItem:a,onUpdateItem:l},a==null?void 0:a.id)})})},to=oo}}]);
